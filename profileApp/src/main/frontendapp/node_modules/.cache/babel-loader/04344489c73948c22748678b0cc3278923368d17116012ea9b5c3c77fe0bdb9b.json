{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { useMessage } from \"./useMessage\";\nimport { EmployeeNameState, EmployeeFullNameState, EmployeeHobbiesState, EmployeeImageState, EmployeeState } from \"../contexts/EmployeeState\";\nimport { useRecoilState } from \"recoil\";\nimport { useNavigate } from \"react-router-dom\";\nexport const useEditProfile = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    showMessage\n  } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\n  const [employeeNameState, setEmployeeNameState] = useRecoilState(EmployeeNameState);\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(EmployeeFullNameState);\n  const [employeeHobbiesState, setEmployeeHobbiesState] = useRecoilState(EmployeeHobbiesState);\n  const [employeeImageState, setEmployeeImageState] = useRecoilState(EmployeeImageState);\n  const updateProfile = useCallback(async () => {\n    const formData = new FormData();\n    formData.append(\"image\", selectedFile);\n    formData.append(\"employeeId\", employeeState);\n    formData.append(\"employeeName\", employeeNameState);\n    formData.append(\"employeeFullName\", employeeFullNameState);\n    formData.append(\"hobbies\", employeeHobbiesState);\n    console.log(formData);\n    console.log(\"プロフィール更新開始\");\n    await axios.post(\"/api/editProfile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      console.log(res.data);\n      setEmployeeImageState(res.data.image);\n      showMessage({\n        title: \"更新が完了しました\",\n        status: \"success\"\n      });\n      navigate(\"/home/setting\");\n    }).catch(() => {\n      showMessage({\n        title: \"更新に失敗しました\",\n        status: \"error\"\n      });\n    });\n  }, []);\n  return {\n    updateProfile,\n    loading\n  };\n};\n_s(useEditProfile, \"ERrLd9ZLZtDs029bZu9D5GMgbjw=\", false, function () {\n  return [useNavigate, useMessage, useRecoilState, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});","map":{"version":3,"names":["axios","useCallback","useState","useMessage","EmployeeNameState","EmployeeFullNameState","EmployeeHobbiesState","EmployeeImageState","EmployeeState","useRecoilState","useNavigate","useEditProfile","_s","navigate","showMessage","loading","setLoading","selectedFile","setSelectedFile","employeeState","setEmployeeState","employeeNameState","setEmployeeNameState","employeeFullNameState","setEmployeeFullNameState","employeeHobbiesState","setEmployeeHobbiesState","employeeImageState","setEmployeeImageState","updateProfile","formData","FormData","append","console","log","post","headers","then","res","data","image","title","status","catch"],"sources":["/home/yoshintm/React/react-type-script-webapp/src/hooks/useEditProfile.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Employee } from \"../types/api/Employee\";\r\nimport { useMessage } from \"./useMessage\";\r\nimport {\r\n  EmployeeNameState,\r\n  EmployeeFullNameState,\r\n  EmployeeHobbiesState,\r\n  EmployeeImageState,\r\n  EmployeeState,\r\n} from \"../contexts/EmployeeState\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const useEditProfile = () => {\r\n  const navigate = useNavigate();\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\r\n  const [employeeNameState, setEmployeeNameState] =\r\n    useRecoilState(EmployeeNameState);\r\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(\r\n    EmployeeFullNameState\r\n  );\r\n  const [employeeHobbiesState, setEmployeeHobbiesState] =\r\n    useRecoilState(EmployeeHobbiesState);\r\n  const [employeeImageState, setEmployeeImageState] =\r\n    useRecoilState(EmployeeImageState);\r\n\r\n  const updateProfile = useCallback(async () => {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", selectedFile);\r\n    formData.append(\"employeeId\", employeeState);\r\n    formData.append(\"employeeName\", employeeNameState);\r\n    formData.append(\"employeeFullName\", employeeFullNameState);\r\n    formData.append(\"hobbies\", employeeHobbiesState);\r\n\r\n    console.log(formData);\r\n    console.log(\"プロフィール更新開始\");\r\n    await axios\r\n      .post(\"/api/editProfile\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setEmployeeImageState(res.data.image);\r\n        showMessage({ title: \"更新が完了しました\", status: \"success\" });\r\n        navigate(\"/home/setting\");\r\n      })\r\n      .catch(() => {\r\n        showMessage({ title: \"更新に失敗しました\", status: \"error\" });\r\n      });\r\n  }, []);\r\n\r\n  return { updateProfile, loading };\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAASC,UAAU,QAAQ,cAAc;AACzC,SACEC,iBAAiB,EACjBC,qBAAqB,EACrBC,oBAAoB,EACpBC,kBAAkB,EAClBC,aAAa,QACR,2BAA2B;AAClC,SAASC,cAAc,QAAQ,QAAQ;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAMC,QAAQ,GAAGH,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEI;EAAY,CAAC,GAAGX,UAAU,CAAC,CAAC;EACpC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACiB,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,cAAc,CAACD,aAAa,CAAC;EACvE,MAAM,CAACa,iBAAiB,EAAEC,oBAAoB,CAAC,GAC7Cb,cAAc,CAACL,iBAAiB,CAAC;EACnC,MAAM,CAACmB,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGf,cAAc,CACtEJ,qBACF,CAAC;EACD,MAAM,CAACoB,oBAAoB,EAAEC,uBAAuB,CAAC,GACnDjB,cAAc,CAACH,oBAAoB,CAAC;EACtC,MAAM,CAACqB,kBAAkB,EAAEC,qBAAqB,CAAC,GAC/CnB,cAAc,CAACF,kBAAkB,CAAC;EAEpC,MAAMsB,aAAa,GAAG5B,WAAW,CAAC,YAAY;IAC5C,MAAM6B,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEf,YAAY,CAAC;IACtCa,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEb,aAAa,CAAC;IAC5CW,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAEX,iBAAiB,CAAC;IAClDS,QAAQ,CAACE,MAAM,CAAC,kBAAkB,EAAET,qBAAqB,CAAC;IAC1DO,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEP,oBAAoB,CAAC;IAEhDQ,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACrBG,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IACzB,MAAMlC,KAAK,CACRmC,IAAI,CAAC,kBAAkB,EAAEL,QAAQ,EAAE;MAClCM,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC,CACDC,IAAI,CAAEC,GAAG,IAAK;MACbL,OAAO,CAACC,GAAG,CAACI,GAAG,CAACC,IAAI,CAAC;MACrBX,qBAAqB,CAACU,GAAG,CAACC,IAAI,CAACC,KAAK,CAAC;MACrC1B,WAAW,CAAC;QAAE2B,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;MACtD7B,QAAQ,CAAC,eAAe,CAAC;IAC3B,CAAC,CAAC,CACD8B,KAAK,CAAC,MAAM;MACX7B,WAAW,CAAC;QAAE2B,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAQ,CAAC,CAAC;IACtD,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEb,aAAa;IAAEd;EAAQ,CAAC;AACnC,CAAC;AAACH,EAAA,CA5CWD,cAAc;EAAA,QACRD,WAAW,EACJP,UAAU,EAGQM,cAAc,EAEtDA,cAAc,EAC0CA,cAAc,EAItEA,cAAc,EAEdA,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}