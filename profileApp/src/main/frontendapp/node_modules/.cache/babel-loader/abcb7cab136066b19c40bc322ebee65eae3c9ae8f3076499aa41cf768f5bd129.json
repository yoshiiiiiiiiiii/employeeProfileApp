{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { useMessage } from \"./useMessage\";\nimport { EmployeeNameState, EmployeeFullNameState, EmployeeHobbiesState, EmployeeImageState, EmployeeState } from \"../contexts/EmployeeState\";\nimport { useRecoilState } from \"recoil\";\nimport { useNavigate } from \"react-router-dom\";\nexport const useEditProfile = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    showMessage\n  } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\n  const [employeeNameState, setEmployeeNameState] = useRecoilState(EmployeeNameState);\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(EmployeeFullNameState);\n  const [employeeHobbiesState, setEmployeeHobbiesState] = useRecoilState(EmployeeHobbiesState);\n  const [employeeImageState, setEmployeeImageState] = useRecoilState(EmployeeImageState);\n  const updateProfile = useCallback(async props => {\n    const {\n      imageFile\n    } = props;\n    const formData = new FormData();\n    formData.append(\"image\", imageFile);\n    formData.append(\"employeeId\", employeeState);\n    formData.append(\"employeeName\", employeeNameState);\n    formData.append(\"employeeFullName\", employeeFullNameState);\n    formData.append(\"hobbies\", employeeHobbiesState);\n    await axios.post(\"/api/editProfile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      setEmployeeImageState(res.data.image);\n      showMessage({\n        title: \"更新が完了しました\",\n        status: \"success\"\n      });\n      navigate(\"/home/setting\");\n    }).catch(() => {\n      showMessage({\n        title: \"更新に失敗しました\",\n        status: \"error\"\n      });\n    });\n  }, []);\n  return {\n    updateProfile,\n    loading\n  };\n};\n_s(useEditProfile, \"0DzBxXa9ZYjY1CCrBFYe4CqgXe0=\", false, function () {\n  return [useNavigate, useMessage, useRecoilState, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});","map":{"version":3,"names":["axios","useCallback","useState","useMessage","EmployeeNameState","EmployeeFullNameState","EmployeeHobbiesState","EmployeeImageState","EmployeeState","useRecoilState","useNavigate","useEditProfile","_s","navigate","showMessage","loading","setLoading","employeeState","setEmployeeState","employeeNameState","setEmployeeNameState","employeeFullNameState","setEmployeeFullNameState","employeeHobbiesState","setEmployeeHobbiesState","employeeImageState","setEmployeeImageState","updateProfile","props","imageFile","formData","FormData","append","post","headers","then","res","data","image","title","status","catch"],"sources":["/home/yoshintm/React/react-type-script-webapp/src/hooks/useEditProfile.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Employee } from \"../types/api/Employee\";\r\nimport { useMessage } from \"./useMessage\";\r\nimport {\r\n  EmployeeNameState,\r\n  EmployeeFullNameState,\r\n  EmployeeHobbiesState,\r\n  EmployeeImageState,\r\n  EmployeeState,\r\n} from \"../contexts/EmployeeState\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ntype Props = {\r\n  imageFile: any;\r\n};\r\n\r\nexport const useEditProfile = () => {\r\n  const navigate = useNavigate();\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\r\n  const [employeeNameState, setEmployeeNameState] =\r\n    useRecoilState(EmployeeNameState);\r\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(\r\n    EmployeeFullNameState\r\n  );\r\n  const [employeeHobbiesState, setEmployeeHobbiesState] =\r\n    useRecoilState(EmployeeHobbiesState);\r\n  const [employeeImageState, setEmployeeImageState] =\r\n    useRecoilState(EmployeeImageState);\r\n\r\n  const updateProfile = useCallback(async (props: Props) => {\r\n    const { imageFile } = props;\r\n    const formData = new FormData();\r\n    formData.append(\"image\", imageFile);\r\n    formData.append(\"employeeId\", employeeState);\r\n    formData.append(\"employeeName\", employeeNameState);\r\n    formData.append(\"employeeFullName\", employeeFullNameState);\r\n    formData.append(\"hobbies\", employeeHobbiesState);\r\n\r\n    await axios\r\n      .post(\"/api/editProfile\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        setEmployeeImageState(res.data.image);\r\n        showMessage({ title: \"更新が完了しました\", status: \"success\" });\r\n        navigate(\"/home/setting\");\r\n      })\r\n      .catch(() => {\r\n        showMessage({ title: \"更新に失敗しました\", status: \"error\" });\r\n      });\r\n  }, []);\r\n\r\n  return { updateProfile, loading };\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAASC,UAAU,QAAQ,cAAc;AACzC,SACEC,iBAAiB,EACjBC,qBAAqB,EACrBC,oBAAoB,EACpBC,kBAAkB,EAClBC,aAAa,QACR,2BAA2B;AAClC,SAASC,cAAc,QAAQ,QAAQ;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAM9C,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAMC,QAAQ,GAAGH,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEI;EAAY,CAAC,GAAGX,UAAU,CAAC,CAAC;EACpC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACe,aAAa,EAAEC,gBAAgB,CAAC,GAAGT,cAAc,CAACD,aAAa,CAAC;EACvE,MAAM,CAACW,iBAAiB,EAAEC,oBAAoB,CAAC,GAC7CX,cAAc,CAACL,iBAAiB,CAAC;EACnC,MAAM,CAACiB,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGb,cAAc,CACtEJ,qBACF,CAAC;EACD,MAAM,CAACkB,oBAAoB,EAAEC,uBAAuB,CAAC,GACnDf,cAAc,CAACH,oBAAoB,CAAC;EACtC,MAAM,CAACmB,kBAAkB,EAAEC,qBAAqB,CAAC,GAC/CjB,cAAc,CAACF,kBAAkB,CAAC;EAEpC,MAAMoB,aAAa,GAAG1B,WAAW,CAAC,MAAO2B,KAAY,IAAK;IACxD,MAAM;MAAEC;IAAU,CAAC,GAAGD,KAAK;IAC3B,MAAME,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,SAAS,CAAC;IACnCC,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEf,aAAa,CAAC;IAC5Ca,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAEb,iBAAiB,CAAC;IAClDW,QAAQ,CAACE,MAAM,CAAC,kBAAkB,EAAEX,qBAAqB,CAAC;IAC1DS,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAET,oBAAoB,CAAC;IAEhD,MAAMvB,KAAK,CACRiC,IAAI,CAAC,kBAAkB,EAAEH,QAAQ,EAAE;MAClCI,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC,CACDC,IAAI,CAAEC,GAAG,IAAK;MACbV,qBAAqB,CAACU,GAAG,CAACC,IAAI,CAACC,KAAK,CAAC;MACrCxB,WAAW,CAAC;QAAEyB,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;MACtD3B,QAAQ,CAAC,eAAe,CAAC;IAC3B,CAAC,CAAC,CACD4B,KAAK,CAAC,MAAM;MACX3B,WAAW,CAAC;QAAEyB,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAQ,CAAC,CAAC;IACtD,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEb,aAAa;IAAEZ;EAAQ,CAAC;AACnC,CAAC;AAACH,EAAA,CAzCWD,cAAc;EAAA,QACRD,WAAW,EACJP,UAAU,EAEQM,cAAc,EAEtDA,cAAc,EAC0CA,cAAc,EAItEA,cAAc,EAEdA,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}