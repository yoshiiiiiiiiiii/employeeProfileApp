{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { useMessage } from \"./useMessage\";\nimport { EmployeeNameState, EmployeeFullNameState, EmployeeHobbiesState, EmployeeImageState, EmployeeState } from \"../contexts/EmployeeState\";\nimport { useRecoilState } from \"recoil\";\nexport const useEditProfile = () => {\n  _s();\n  const {\n    showMessage\n  } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\n  const [employeeNameState, setEmployeeNameState] = useRecoilState(EmployeeNameState);\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(EmployeeFullNameState);\n  const [employeeHobbiesState, setEmployeeHobbiesState] = useRecoilState(EmployeeHobbiesState);\n  const [employeeImageState, setEmployeeImageState] = useRecoilState(EmployeeImageState);\n  const updateProfile = useCallback(async props => {\n    const {\n      image\n    } = props;\n    console.log(\"従業員情報更新開始\");\n    setLoading(true);\n    await axios.post(\"/api/editProfile\", {\n      employeeId: employeeState,\n      employeeName: employeeNameState,\n      employeeFullName: employeeFullNameState,\n      hobbies: employeeHobbiesState\n    }).then(res => {\n      setEmployeeNameState(res.data.employeeName);\n      setEmployeeFullNameState(res.data.employeeFullName);\n      setEmployeeHobbiesState(res.data.hobbies);\n      setEmployeeImageState(res.data.image);\n      showMessage({\n        title: \"社員情報を更新しました\",\n        status: \"info\"\n      });\n    }).catch(e => {\n      console.log(e);\n      showMessage({\n        title: \"社員情報の更新に失敗しました\",\n        status: \"error\"\n      });\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, []);\n  return {\n    updateProfile,\n    loading\n  };\n};\n_s(useEditProfile, \"6OXn0adDVXTQGcYcOKpQ35Hqmro=\", false, function () {\n  return [useMessage, useRecoilState, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});","map":{"version":3,"names":["axios","useCallback","useState","useMessage","EmployeeNameState","EmployeeFullNameState","EmployeeHobbiesState","EmployeeImageState","EmployeeState","useRecoilState","useEditProfile","_s","showMessage","loading","setLoading","employeeState","setEmployeeState","employeeNameState","setEmployeeNameState","employeeFullNameState","setEmployeeFullNameState","employeeHobbiesState","setEmployeeHobbiesState","employeeImageState","setEmployeeImageState","updateProfile","props","image","console","log","post","employeeId","employeeName","employeeFullName","hobbies","then","res","data","title","status","catch","e","finally"],"sources":["/home/yoshintm/React/react-type-script-webapp/src/hooks/useEditProfile.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Employee } from \"../types/api/Employee\";\r\nimport { useMessage } from \"./useMessage\";\r\nimport {\r\n  EmployeeNameState,\r\n  EmployeeFullNameState,\r\n  EmployeeHobbiesState,\r\n  EmployeeImageState,\r\n  EmployeeState,\r\n} from \"../contexts/EmployeeState\";\r\nimport { useRecoilState } from \"recoil\";\r\n\r\ntype Props = {\r\n    image?:Blob\r\n}\r\n\r\nexport const useEditProfile = () => {\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const [employeeState, setEmployeeState] = useRecoilState(EmployeeState);\r\n  const [employeeNameState, setEmployeeNameState] =\r\n    useRecoilState(EmployeeNameState);\r\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(\r\n    EmployeeFullNameState\r\n  );\r\n  const [employeeHobbiesState, setEmployeeHobbiesState] =\r\n    useRecoilState(EmployeeHobbiesState);\r\n  const [employeeImageState, setEmployeeImageState] =\r\n    useRecoilState(EmployeeImageState);\r\n\r\n  const updateProfile = useCallback(async (props:Props) => {\r\n    const {image} = props;\r\n    console.log(\"従業員情報更新開始\");\r\n    setLoading(true);\r\n    await axios\r\n      .post(\"/api/editProfile\", {\r\n        employeeId: employeeState,\r\n        employeeName: employeeNameState,\r\n        employeeFullName: employeeFullNameState,\r\n        hobbies: employeeHobbiesState,\r\n      })\r\n      .then((res) => {\r\n        setEmployeeNameState(res.data.employeeName);\r\n        setEmployeeFullNameState(res.data.employeeFullName);\r\n        setEmployeeHobbiesState(res.data.hobbies);\r\n        setEmployeeImageState(res.data.image);\r\n        showMessage({\r\n          title: \"社員情報を更新しました\",\r\n          status: \"info\",\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        showMessage({\r\n          title: \"社員情報の更新に失敗しました\",\r\n          status: \"error\",\r\n        });\r\n      })\r\n      .finally(() => {\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  return { updateProfile, loading };\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAASC,UAAU,QAAQ,cAAc;AACzC,SACEC,iBAAiB,EACjBC,qBAAqB,EACrBC,oBAAoB,EACpBC,kBAAkB,EAClBC,aAAa,QACR,2BAA2B;AAClC,SAASC,cAAc,QAAQ,QAAQ;AAMvC,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAM;IAAEC;EAAY,CAAC,GAAGT,UAAU,CAAC,CAAC;EACpC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGP,cAAc,CAACD,aAAa,CAAC;EACvE,MAAM,CAACS,iBAAiB,EAAEC,oBAAoB,CAAC,GAC7CT,cAAc,CAACL,iBAAiB,CAAC;EACnC,MAAM,CAACe,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGX,cAAc,CACtEJ,qBACF,CAAC;EACD,MAAM,CAACgB,oBAAoB,EAAEC,uBAAuB,CAAC,GACnDb,cAAc,CAACH,oBAAoB,CAAC;EACtC,MAAM,CAACiB,kBAAkB,EAAEC,qBAAqB,CAAC,GAC/Cf,cAAc,CAACF,kBAAkB,CAAC;EAEpC,MAAMkB,aAAa,GAAGxB,WAAW,CAAC,MAAOyB,KAAW,IAAK;IACvD,MAAM;MAACC;IAAK,CAAC,GAAGD,KAAK;IACrBE,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IACxBf,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMd,KAAK,CACR8B,IAAI,CAAC,kBAAkB,EAAE;MACxBC,UAAU,EAAEhB,aAAa;MACzBiB,YAAY,EAAEf,iBAAiB;MAC/BgB,gBAAgB,EAAEd,qBAAqB;MACvCe,OAAO,EAAEb;IACX,CAAC,CAAC,CACDc,IAAI,CAAEC,GAAG,IAAK;MACblB,oBAAoB,CAACkB,GAAG,CAACC,IAAI,CAACL,YAAY,CAAC;MAC3CZ,wBAAwB,CAACgB,GAAG,CAACC,IAAI,CAACJ,gBAAgB,CAAC;MACnDX,uBAAuB,CAACc,GAAG,CAACC,IAAI,CAACH,OAAO,CAAC;MACzCV,qBAAqB,CAACY,GAAG,CAACC,IAAI,CAACV,KAAK,CAAC;MACrCf,WAAW,CAAC;QACV0B,KAAK,EAAE,aAAa;QACpBC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ,CAAC,CAAC,CACDC,KAAK,CAAEC,CAAC,IAAK;MACZb,OAAO,CAACC,GAAG,CAACY,CAAC,CAAC;MACd7B,WAAW,CAAC;QACV0B,KAAK,EAAE,gBAAgB;QACvBC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ,CAAC,CAAC,CACDG,OAAO,CAAC,MAAM;MACb5B,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEW,aAAa;IAAEZ;EAAQ,CAAC;AACnC,CAAC;AAACF,EAAA,CAhDWD,cAAc;EAAA,QACDP,UAAU,EAEQM,cAAc,EAEtDA,cAAc,EAC0CA,cAAc,EAItEA,cAAc,EAEdA,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}