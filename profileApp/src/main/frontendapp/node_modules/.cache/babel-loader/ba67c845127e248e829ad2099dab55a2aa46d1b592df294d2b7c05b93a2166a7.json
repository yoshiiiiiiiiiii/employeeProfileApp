{"ast":null,"code":"import{memo,useState}from\"react\";import{Stack,Modal,ModalOverlay,ModalContent,ModalHeader,ModalCloseButton,ModalBody,FormControl,FormLabel,Input}from\"@chakra-ui/react\";import{PrimaryButton}from\"../../atoms/button/PrimaryButton\";import{useNavigate}from\"react-router-dom\";import{useMessage}from\"../../../hooks/useMessage\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const EmployeeDetailModal=/*#__PURE__*/memo(props=>{const{employee,isOpen,onClose,employeeId,isAdmin}=props;const navigate=useNavigate();const{showMessage}=useMessage();const[loading,setLoading]=useState(false);//API送信関数\nconst handleSubmit=async e=>{setLoading(true);e.preventDefault();await axios.post(\"/api/delete\",{employeeId:employee.employeeId}).then(res=>{if(res.status===200){showMessage({title:\"削除が完了しました\",status:\"info\"});navigate(\"/home\");}else{showMessage({title:\"削除が出来ませんでした\",status:\"error\"});setLoading(false);}}).catch(()=>{showMessage({title:\"削除が出来ませんでした\",status:\"error\"});setLoading(false);});};return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,autoFocus:false,motionPreset:\"slideInBottom\",children:/*#__PURE__*/_jsx(ModalOverlay,{children:/*#__PURE__*/_jsxs(ModalContent,{padding:6,children:[/*#__PURE__*/_jsx(ModalHeader,{children:\"\\u5F93\\u696D\\u54E1\\u8A73\\u7D30\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsxs(ModalBody,{mx:4,children:[/*#__PURE__*/_jsx(Stack,{spacing:4,children:/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u540D\\u524D\"}),/*#__PURE__*/_jsx(Input,{value:employee===null||employee===void 0?void 0:employee.employeeName,isReadOnly:true}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u30D5\\u30EB\\u30CD\\u30FC\\u30E0\"}),/*#__PURE__*/_jsx(Input,{value:employee===null||employee===void 0?void 0:employee.employeeFullName,isReadOnly:true})]}),/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\"\\u8DA3\\u5473\"}),/*#__PURE__*/_jsx(Input,{value:employee===null||employee===void 0?void 0:employee.hobbies,isReadOnly:true})]})]})}),isAdmin===1&&employeeId!==employee.employeeId?/*#__PURE__*/_jsx(PrimaryButton,{children:\"削除\",onClick:handleSubmit}):null]})]})})});});","map":{"version":3,"names":["memo","useState","Stack","Modal","ModalOverlay","ModalContent","ModalHeader","ModalCloseButton","ModalBody","FormControl","FormLabel","Input","PrimaryButton","useNavigate","useMessage","axios","jsx","_jsx","jsxs","_jsxs","EmployeeDetailModal","props","employee","isOpen","onClose","employeeId","isAdmin","navigate","showMessage","loading","setLoading","handleSubmit","e","preventDefault","post","then","res","status","title","catch","autoFocus","motionPreset","children","padding","mx","spacing","value","employeeName","isReadOnly","employeeFullName","hobbies","onClick"],"sources":["/home/yoshintm/React/react-type-script-webapp/src/components/organisms/employee/EmployeeDetailModal.tsx"],"sourcesContent":["import { FC, FormEvent, memo, useState } from \"react\";\r\nimport {\r\n  Stack,\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalCloseButton,\r\n  ModalBody,\r\n  FormControl,\r\n  FormLabel,\r\n  Input,\r\n} from \"@chakra-ui/react\";\r\nimport { Employee } from \"../../../types/api/Employee\";\r\nimport { PrimaryButton } from \"../../atoms/button/PrimaryButton\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useMessage } from \"../../../hooks/useMessage\";\r\nimport axios from \"axios\";\r\nimport { useAllEmployees } from \"../../../hooks/useAllEmployees\";\r\n\r\ntype Props = {\r\n  employee: Employee | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  employeeId: string;\r\n  isAdmin: number;\r\n};\r\n\r\nexport const EmployeeDetailModal: FC<Props> = memo((props) => {\r\n  const { employee, isOpen, onClose, employeeId, isAdmin } = props;\r\n  const navigate = useNavigate();\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //API送信関数\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n    await axios\r\n      .post(\"/api/delete\", {\r\n        employeeId: employee.employeeId,\r\n      })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          showMessage({ title: \"削除が完了しました\", status: \"info\" });\r\n          navigate(\"/home\");\r\n        } else {\r\n          showMessage({ title: \"削除が出来ませんでした\", status: \"error\" });\r\n          setLoading(false);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        showMessage({ title: \"削除が出来ませんでした\", status: \"error\" });\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      autoFocus={false}\r\n      motionPreset=\"slideInBottom\"\r\n    >\r\n      <ModalOverlay>\r\n        <ModalContent padding={6}>\r\n          <ModalHeader>従業員詳細</ModalHeader>\r\n          <ModalCloseButton />\r\n          <ModalBody mx={4}>\r\n            <Stack spacing={4}>\r\n              <FormControl>\r\n                <FormLabel>名前</FormLabel>\r\n                <Input value={employee?.employeeName} isReadOnly />\r\n                <FormControl>\r\n                  <FormLabel>フルネーム</FormLabel>\r\n                  <Input value={employee?.employeeFullName} isReadOnly />\r\n                </FormControl>\r\n                <FormControl>\r\n                  <FormLabel>趣味</FormLabel>\r\n                  <Input value={employee?.hobbies} isReadOnly />\r\n                </FormControl>\r\n              </FormControl>\r\n            </Stack>\r\n            {isAdmin === 1 && employeeId !== employee.employeeId ? (\r\n              <PrimaryButton children={\"削除\"} onClick={handleSubmit} />\r\n            ) : null}\r\n          </ModalBody>\r\n        </ModalContent>\r\n      </ModalOverlay>\r\n    </Modal>\r\n  );\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}