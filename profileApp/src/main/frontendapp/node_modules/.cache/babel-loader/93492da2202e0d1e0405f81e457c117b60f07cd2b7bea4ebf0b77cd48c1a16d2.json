{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useCallback, useState } from \"react\";\nimport { useMessage } from \"./useMessage\";\nimport { EmployeeNameState, EmployeeFullNameState, EmployeeHobbiesState, EmployeeImageState } from \"../contexts/EmployeeState\";\nimport { useRecoilState } from \"recoil\";\nimport { useNavigate } from \"react-router-dom\";\nexport const useEditProfile = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    showMessage\n  } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [employeeImageState, setEmployeeImageState] = useRecoilState(EmployeeImageState);\n  const [employeeNameState, setEmployeeNameState] = useRecoilState(EmployeeNameState);\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(EmployeeFullNameState);\n  const [employeeHobbiesState, setEmployeeHobbiesState] = useRecoilState(EmployeeHobbiesState);\n  const updateProfile = useCallback(async props => {\n    const {\n      imageFile,\n      employeeId,\n      employeeName,\n      employeeFullName,\n      hobbies\n    } = props;\n    const formData = new FormData();\n    formData.append(\"image\", imageFile);\n    formData.append(\"employeeId\", employeeId);\n    formData.append(\"employeeName\", employeeName);\n    formData.append(\"employeeFullName\", employeeFullName);\n    formData.append(\"hobbies\", hobbies);\n    await axios.post(\"/api/editProfile\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      setEmployeeImageState(res.data.image);\n      setEmployeeNameState(res.data.employeeName);\n      setEmployeeFullNameState(res.data.employeeFullName);\n      setEmployeeHobbiesState(res.data.hobbies);\n      showMessage({\n        title: \"更新が完了しました\",\n        status: \"success\"\n      });\n      navigate(\"/home/setting\");\n    }).catch(() => {\n      showMessage({\n        title: \"更新に失敗しました\",\n        status: \"error\"\n      });\n    });\n  }, []);\n  return {\n    updateProfile,\n    loading\n  };\n};\n_s(useEditProfile, \"ADdlAM2AlTePSvq08+UpzVAbslY=\", false, function () {\n  return [useNavigate, useMessage, useRecoilState, useRecoilState, useRecoilState, useRecoilState];\n});","map":{"version":3,"names":["axios","useCallback","useState","useMessage","EmployeeNameState","EmployeeFullNameState","EmployeeHobbiesState","EmployeeImageState","useRecoilState","useNavigate","useEditProfile","_s","navigate","showMessage","loading","setLoading","employeeImageState","setEmployeeImageState","employeeNameState","setEmployeeNameState","employeeFullNameState","setEmployeeFullNameState","employeeHobbiesState","setEmployeeHobbiesState","updateProfile","props","imageFile","employeeId","employeeName","employeeFullName","hobbies","formData","FormData","append","post","headers","then","res","data","image","title","status","catch"],"sources":["/home/yoshintm/React/react-type-script-webapp/src/hooks/useEditProfile.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { useCallback, useState } from \"react\";\r\nimport { Employee } from \"../types/api/Employee\";\r\nimport { useMessage } from \"./useMessage\";\r\nimport {\r\n  EmployeeNameState,\r\n  EmployeeFullNameState,\r\n  EmployeeHobbiesState,\r\n  EmployeeImageState,\r\n  EmployeeState,\r\n} from \"../contexts/EmployeeState\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ntype Props = {\r\n  imageFile: any;\r\n  employeeId: string;\r\n  employeeName: string;\r\n  employeeFullName: string;\r\n  hobbies: string;\r\n};\r\n\r\nexport const useEditProfile = () => {\r\n  const navigate = useNavigate();\r\n  const { showMessage } = useMessage();\r\n  const [loading, setLoading] = useState(false);\r\n  const [employeeImageState, setEmployeeImageState] =\r\n    useRecoilState(EmployeeImageState);\r\n  const [employeeNameState, setEmployeeNameState] =\r\n    useRecoilState(EmployeeNameState);\r\n  const [employeeFullNameState, setEmployeeFullNameState] = useRecoilState(\r\n    EmployeeFullNameState\r\n  );\r\n  const [employeeHobbiesState, setEmployeeHobbiesState] =\r\n    useRecoilState(EmployeeHobbiesState);\r\n\r\n  const updateProfile = useCallback(async (props: Props) => {\r\n    const { imageFile, employeeId, employeeName, employeeFullName, hobbies } =\r\n      props;\r\n    const formData = new FormData();\r\n    formData.append(\"image\", imageFile);\r\n    formData.append(\"employeeId\", employeeId);\r\n    formData.append(\"employeeName\", employeeName);\r\n    formData.append(\"employeeFullName\", employeeFullName);\r\n    formData.append(\"hobbies\", hobbies);\r\n\r\n    await axios\r\n      .post(\"/api/editProfile\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        setEmployeeImageState(res.data.image);\r\n        setEmployeeNameState(res.data.employeeName);\r\n        setEmployeeFullNameState(res.data.employeeFullName);\r\n        setEmployeeHobbiesState(res.data.hobbies);\r\n        showMessage({ title: \"更新が完了しました\", status: \"success\" });\r\n        navigate(\"/home/setting\");\r\n      })\r\n      .catch(() => {\r\n        showMessage({ title: \"更新に失敗しました\", status: \"error\" });\r\n      });\r\n  }, []);\r\n\r\n  return { updateProfile, loading };\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAE7C,SAASC,UAAU,QAAQ,cAAc;AACzC,SACEC,iBAAiB,EACjBC,qBAAqB,EACrBC,oBAAoB,EACpBC,kBAAkB,QAEb,2BAA2B;AAClC,SAASC,cAAc,QAAQ,QAAQ;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAU9C,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAMC,QAAQ,GAAGH,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEI;EAAY,CAAC,GAAGV,UAAU,CAAC,CAAC;EACpC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACc,kBAAkB,EAAEC,qBAAqB,CAAC,GAC/CT,cAAc,CAACD,kBAAkB,CAAC;EACpC,MAAM,CAACW,iBAAiB,EAAEC,oBAAoB,CAAC,GAC7CX,cAAc,CAACJ,iBAAiB,CAAC;EACnC,MAAM,CAACgB,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGb,cAAc,CACtEH,qBACF,CAAC;EACD,MAAM,CAACiB,oBAAoB,EAAEC,uBAAuB,CAAC,GACnDf,cAAc,CAACF,oBAAoB,CAAC;EAEtC,MAAMkB,aAAa,GAAGvB,WAAW,CAAC,MAAOwB,KAAY,IAAK;IACxD,MAAM;MAAEC,SAAS;MAAEC,UAAU;MAAEC,YAAY;MAAEC,gBAAgB;MAAEC;IAAQ,CAAC,GACtEL,KAAK;IACP,MAAMM,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEP,SAAS,CAAC;IACnCK,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEN,UAAU,CAAC;IACzCI,QAAQ,CAACE,MAAM,CAAC,cAAc,EAAEL,YAAY,CAAC;IAC7CG,QAAQ,CAACE,MAAM,CAAC,kBAAkB,EAAEJ,gBAAgB,CAAC;IACrDE,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEH,OAAO,CAAC;IAEnC,MAAM9B,KAAK,CACRkC,IAAI,CAAC,kBAAkB,EAAEH,QAAQ,EAAE;MAClCI,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC,CACDC,IAAI,CAAEC,GAAG,IAAK;MACbpB,qBAAqB,CAACoB,GAAG,CAACC,IAAI,CAACC,KAAK,CAAC;MACrCpB,oBAAoB,CAACkB,GAAG,CAACC,IAAI,CAACV,YAAY,CAAC;MAC3CP,wBAAwB,CAACgB,GAAG,CAACC,IAAI,CAACT,gBAAgB,CAAC;MACnDN,uBAAuB,CAACc,GAAG,CAACC,IAAI,CAACR,OAAO,CAAC;MACzCjB,WAAW,CAAC;QAAE2B,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;MACtD7B,QAAQ,CAAC,eAAe,CAAC;IAC3B,CAAC,CAAC,CACD8B,KAAK,CAAC,MAAM;MACX7B,WAAW,CAAC;QAAE2B,KAAK,EAAE,WAAW;QAAEC,MAAM,EAAE;MAAQ,CAAC,CAAC;IACtD,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEjB,aAAa;IAAEV;EAAQ,CAAC;AACnC,CAAC;AAACH,EAAA,CA5CWD,cAAc;EAAA,QACRD,WAAW,EACJN,UAAU,EAGhCK,cAAc,EAEdA,cAAc,EAC0CA,cAAc,EAItEA,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}